<!doctype html>
<html lang="en" style="width: 1903px;height: 965px;" xmlns:th="http://www.thymeleaf.org">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
          rel="stylesheet"
          integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
          crossorigin="anonymous">

    <title>Admin</title>
</head>
<body style="height: 965px;border-style: none;background: rgb(248,249,250);width: 1903px;margin-left: 0px;">
<div class="row" style="background: rgb(52,58,64);">
    <div class="col d-xxl-flex justify-content-xxl-start align-items-xxl-center">
        <span class="text-white"
              style="padding-right: 0px;
              margin: 5px 10px;"
              th:text="${user.username}">mail</span>
        <span
                class="text-white"
                style="margin: 5px;">with role:</span>
        <span
                class="text-white"
                style="margin: 5px;"
                th:each="role : ${user.getRoles}" th:text="${role.getRole().substring(5)} + ' '">role</span>
    </div>
    <div class="col d-xxl-flex justify-content-xxl-end align-items-xxl-center">
        <form th:method="POST" th:action="@{/logout}">
            <button class="btn btn-secondary btn-sm link-secondary d-xxl-flex" type="submit"
                    style="margin: 5px;
                    background: #ffffff00;
                    border-style: none;">
                Logout
            </button>
        </form>
    </div>
</div>
<div class="row" style="margin-top: 20px;height: 926px;">
    <div class="col-auto" style="background: #ffffff;padding-right: 0px;">
        <div class="row">
            <div class="col">
                <button class="btn btn-primary"
                        type="submit"
                        style="width: 225px;
                        border-style: none;">
                    Admin
                </button>
            </div>
        </div>
        <div class="row">
            <div class="col">
                <form th:method="GET" th:action="@{/user}">
                    <button class="btn btn-outline-primary"
                            type="submit"
                            style="width: 225px;
                            border-style: none;">
                        User
                    </button>
                </form>
            </div>
        </div>
    </div>
    <div class="col-auto"></div>
    <div class="col" style="background: rgba(255,255,255,0);">
        <div class="row">
            <div class="col"
                 style="padding-left: 0px;
                 margin-bottom: 14px;">
                <strong class="fs-1">
                    Admin Panel
                </strong>
            </div>
        </div>
        <div class="row">
            <div class="col" style="background: #ffffff;padding-left: 0px;">
                <div>
                    <ul class="nav nav-tabs" role="tablist">
                        <li class="nav-item" role="presentation">
                            <a class="nav-link active"
                               role="tab"
                               data-bs-toggle="tab"
                               href="#tab-1">
                                <span style="color: #495057;
                                background-color: #fff;">
                                    Users table
                                </span>
                            </a>
                        </li>
                        <li class="nav-item" role="presentation">
                            <a class="nav-link"
                               role="tab"
                               data-bs-toggle="tab"
                               href="#tab-2">
                                New User
                            </a>
                        </li>
                    </ul>
                    <div class="tab-content">
                        <div class="tab-pane active" role="tabpanel" id="tab-1">
                            <div class="row" style="background: rgb(247,247,247);">
                                <div class="col" style="margin-top: 5px;margin-bottom: 5px;">
                                    <strong class="fs-4">
                                        All Users
                                    </strong>
                                </div>
                            </div>
                            <div class="table-responsive" style="padding-left: 15px;">
                                <table class="table">
                                    <thead>
                                    <tr>
                                        <th><strong>ID</strong></th>
                                        <th>First Name</th>
                                        <th>Last Name</th>
                                        <th>Age</th>
                                        <th>Email</th>
                                        <th>Role</th>
                                        <th>Edit</th>
                                        <th>Delete</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr th:each="user : ${list}">
                                        <td th:text="${user.id}"></td>
                                        <td th:text="${user.firstname}"></td>
                                        <td th:text="${user.lastname}"></td>
                                        <td th:text="${user.age}"></td>
                                        <td th:text="${user.username}"></td>
                                        <td>
                                            <span th:each="role : ${user.getRoles()}"
                                                  th:text="${role.getRole().substring(5)} + ' '">
                                            </span>
                                        </td>
                                        <td>
                                            <button class="btn btn-success"
                                                    data-bs-toggle="modal"
                                                    th:data-bs-target="${'#modal-1'+ user.id}"
                                                    th:data-row="${user}">
                                                Edit
                                            </button>
                                            <div class="modal fade"
                                                 th:id="${'modal-1'+ user.id}"
                                                 tabindex="-1"
                                                 aria-labelledby="update"
                                                 aria-hidden="true">
                                                <div class="modal-dialog" role="document">
                                                    <div class="modal-content">
                                                        <div class="modal-header">
                                                            <h4 class="modal-title">Edit User</h4>
                                                            <button class="btn-close" type="button" aria-label="Close"
                                                                    data-bs-dismiss="modal"></button>
                                                        </div>
                                                        <form th:method="PATCH"
                                                              th:action="@{/admin/update/{id}(id=${user.id})}"
                                                              th:object="${user}">
                                                            <div class="modal-body">
                                                                <div class="row">
                                                                    <div class="col"></div>
                                                                    <div class="col">
                                                                        <label class="form-label
                                                                        fw-bold
                                                                        d-xxl-flex
                                                                        justify-content-xxl-center
                                                                        align-items-xxl-center"
                                                                               style="margin-top: 5px;
                                                                               margin-bottom: 5px;">
                                                                            First Name
                                                                        </label>
                                                                        <input class="form-control
                                                                        d-xxl-flex
                                                                        justify-content-xxl-center
                                                                        align-items-xxl-center"
                                                                               type="text"
                                                                               required
                                                                               minlength="2"
                                                                               th:value="${user.firstname}"
                                                                               name="firstname">
                                                                        <label class="form-label
                                                                        fw-semibold
                                                                        d-xxl-flex
                                                                        justify-content-xxl-center
                                                                        align-items-xxl-center"
                                                                               style="margin-top: 5px;
                                                                               margin-bottom: 5px;">
                                                                            Last Name
                                                                        </label>
                                                                        <input class="form-control"
                                                                               type="text"
                                                                               required
                                                                               minlength="2"
                                                                               th:value="${user.lastname}"
                                                                               name="lastname">
                                                                        <label class="form-label
                                                                        fw-semibold
                                                                        d-xxl-flex
                                                                        justify-content-xxl-center
                                                                        align-items-xxl-center"
                                                                               style="margin-top: 5px;
                                                                               margin-bottom: 5px;">
                                                                            Age
                                                                        </label>
                                                                        <input class="form-control"
                                                                               type="number"
                                                                               min="1"
                                                                               required
                                                                               minlength="1"
                                                                               th:value="${user.age}"
                                                                               name="age">
                                                                        <label class="form-label
                                                                        fw-semibold
                                                                        d-xxl-flex
                                                                        justify-content-xxl-center
                                                                        align-items-xxl-center"
                                                                               style="margin-top: 5px;margin-bottom: 5px;">
                                                                            Email
                                                                        </label>
                                                                        <input class="form-control"
                                                                               type="email"
                                                                               required
                                                                               minlength="5"
                                                                               th:value="${user.username}"
                                                                               name="username">
                                                                        <label class="form-label
                                                                            fw-semibold
                                                                            d-xxl-flex
                                                                            justify-content-xxl-center
                                                                            align-items-xxl-center"
                                                                               style="margin-bottom: 5px;
                                                                            margin-top: 5px;">
                                                                            Password
                                                                        </label>
                                                                        <input class="form-control"
                                                                               type="password"
                                                                               required
                                                                               minlength="2"
                                                                               th:value="${user.password}"
                                                                               name="password">
                                                                        <label class="form-label
                                                                        fw-semibold
                                                                        d-xxl-flex
                                                                        justify-content-xxl-center
                                                                        align-items-xxl-center"
                                                                               style="margin-top: 5px;">
                                                                            Role
                                                                        </label>
                                                                        <select th:field="*{roles}" class="form-select"
                                                                                multiple="multiple"
                                                                                required>
                                                                            <option th:each="role : ${roles}"
                                                                                    th:value="${role.id}"
                                                                                    th:text="${role.role}"
                                                                                    name="role">
                                                                            </option>
                                                                        </select>
                                                                    </div>
                                                                    <div class="col"></div>
                                                                </div>
                                                            </div>
                                                            <div class="modal-footer">
                                                                <button class="btn btn-secondary"
                                                                        type="button"
                                                                        data-bs-dismiss="modal">
                                                                    Close
                                                                </button>
                                                                <button class="btn btn-primary" type="submit">
                                                                    Edit
                                                                </button>
                                                            </div>
                                                        </form>
                                                    </div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <button class="btn btn-danger"
                                                    data-bs-toggle="modal"
                                                    th:data-bs-target="${'#modal-2'+ user.id}"
                                                    th:data-row="${user}">
                                                Delete
                                            </button>
                                            <div class="modal fade" th:id="${'modal-2'+ user.id}" tabindex="-1"
                                                 aria-labelledby="delete" aria-hidden="true">
                                                <div class="modal-dialog" role="document">
                                                    <div class="modal-content">
                                                        <div class="modal-header">
                                                            <h4 class="modal-title">Modal Title</h4>
                                                            <button class="btn-close" type="button" aria-label="Close"
                                                                    data-bs-dismiss="modal"></button>
                                                        </div>
                                                        <form th:method="DELETE"
                                                              th:action="@{/admin/delete/{id}(id=${user.id})}"
                                                              th:object="${user}">
                                                            <div class="modal-body">
                                                                <div class="row">
                                                                    <div class="col"></div>
                                                                    <div class="col">
                                                                        <label class="form-label
                                                                        fw-bold
                                                                        d-xxl-flex
                                                                        justify-content-xxl-center
                                                                        align-items-xxl-center"
                                                                               style="margin-top: 5px;
                                                                               margin-bottom: 5px;">
                                                                            ID
                                                                        </label>
                                                                        <input class="form-control"
                                                                               type="number"
                                                                               th:value="${user.id}"
                                                                               name="id"
                                                                               readonly>
                                                                        <label class="form-label
                                                                        fw-bold
                                                                        d-xxl-flex
                                                                        justify-content-xxl-center
                                                                        align-items-xxl-center"
                                                                               style="margin-top: 5px;
                                                                               margin-bottom: 5px;">
                                                                            First Name
                                                                        </label>
                                                                        <input class="form-control
                                                                        d-xxl-flex
                                                                        justify-content-xxl-center
                                                                        align-items-xxl-center"
                                                                               type="text"
                                                                               th:value="${user.firstname}"
                                                                               name="firstname"
                                                                               readonly>
                                                                        <label class="form-label
                                                                        fw-semibold
                                                                        d-xxl-flex
                                                                        justify-content-xxl-center
                                                                        align-items-xxl-center"
                                                                               style="margin-top: 5px;
                                                                               margin-bottom: 5px;">
                                                                            Last Name
                                                                        </label>
                                                                        <input class="form-control"
                                                                               type="text"
                                                                               th:value="${user.lastname}"
                                                                               name="lastname"
                                                                               readonly>
                                                                        <label class="form-label
                                                                        fw-semibold
                                                                        d-xxl-flex
                                                                        justify-content-xxl-center
                                                                        align-items-xxl-center"
                                                                               style="margin-top: 5px;
                                                                               margin-bottom: 5px;">
                                                                            Age
                                                                        </label>
                                                                        <input class="form-control"
                                                                               type="number"
                                                                               th:value="${user.age}"
                                                                               name="age"
                                                                               readonly>
                                                                        <label class="form-label
                                                                        fw-semibold
                                                                        d-xxl-flex
                                                                        justify-content-xxl-center
                                                                        align-items-xxl-center"
                                                                               style="margin-top: 5px;
                                                                               margin-bottom: 5px;">
                                                                            Email
                                                                        </label>
                                                                        <input class="form-control"
                                                                               type="email"
                                                                               th:value="${user.username}"
                                                                               name="username"
                                                                               readonly>
                                                                        <label class="form-label
                                                                        fw-semibold
                                                                        d-xxl-flex
                                                                        justify-content-xxl-center
                                                                        align-items-xxl-center"
                                                                               style="margin-bottom: 5px;
                                                                               margin-top: 5px;">
                                                                            Password
                                                                        </label>
                                                                        <input class="form-control"
                                                                               type="password"
                                                                               th:value="${user.password}"
                                                                               name="password"
                                                                               readonly>
                                                                        <label class="form-label
                                                                        fw-semibold
                                                                        d-xxl-flex
                                                                        justify-content-xxl-center
                                                                        align-items-xxl-center"
                                                                               style="margin-top: 5px;">
                                                                            Role
                                                                        </label>
                                                                        <select th:field="*{roles}" class="form-select"
                                                                                multiple="multiple"
                                                                                required="required">
                                                                            <option selected disabled
                                                                                    th:each="role : ${roles}"
                                                                                    th:value="${role.id}"
                                                                                    th:text="${role.role}"
                                                                                    name="role">
                                                                            </option>
                                                                        </select>
                                                                    </div>
                                                                    <div class="col"></div>
                                                                </div>
                                                            </div>
                                                            <div class="modal-footer">
                                                                <button class="btn btn-secondary"
                                                                        type="button"
                                                                        data-bs-dismiss="modal">
                                                                    Close
                                                                </button>
                                                                <button class="btn btn-danger"
                                                                        type="submit">
                                                                    Delete
                                                                </button>
                                                            </div>
                                                        </form>
                                                    </div>
                                                </div>
                                            </div>
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="tab-pane" role="tabpanel" id="tab-2">
                            <div class="row" style="background: rgb(247,247,247);">
                                <div class="col"
                                     style="margin-top: 5px;
                                     margin-bottom: 5px;">
                                    <strong class="fs-4">
                                        Add new User
                                    </strong>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col"></div>
                                <div class="col">
                                    <form th:method="POST" th:action="@{/admin/add}" th:object="${user}">
                                        <label class="form-label
                                        fw-bold
                                        d-xxl-flex
                                        justify-content-xxl-center
                                        align-items-xxl-center"
                                               style="margin-top: 5px;margin-bottom: 5px;">
                                            First Name
                                        </label>
                                        <input class="form-control
                                        d-xxl-flex
                                        justify-content-xxl-center
                                        align-items-xxl-center"
                                               type="text"
                                               th:name="firstname"
                                               required
                                               minlength="2">
                                        <label class="form-label
                                        fw-semibold
                                        d-xxl-flex
                                        justify-content-xxl-center
                                        align-items-xxl-center"
                                               style="margin-top: 5px;
                                               margin-bottom: 5px;">
                                            Last Name
                                        </label>
                                        <input class="form-control"
                                               type="text"
                                               th:name="lastname"
                                               minlength="2"
                                               required>
                                        <label class="form-label
                                        fw-semibold
                                        d-xxl-flex
                                        justify-content-xxl-center
                                        align-items-xxl-center"
                                               style="margin-top: 5px;margin-bottom: 5px;">
                                            Age
                                        </label>
                                        <input class="form-control"
                                               type="number"
                                               th:min="1"
                                               th:name="age"
                                               required>
                                        <label class="form-label
                                            fw-semibold
                                            d-xxl-flex
                                            justify-content-xxl-center
                                            align-items-xxl-center"
                                               style="margin-top: 5px;
                                            margin-bottom: 5px;">
                                            Email
                                        </label>
                                        <input class="form-control"
                                               type="email"
                                               th:name="username"
                                               required=""
                                               minlength="5"
                                               placeholder="A-z@A-z.A-z">
                                        <label class="form-label
                                        fw-semibold
                                        d-xxl-flex
                                        justify-content-xxl-center
                                        align-items-xxl-center"
                                               style="margin-bottom: 5px;
                                               margin-top: 5px;">
                                            Password
                                        </label>
                                        <input class="form-control"
                                               type="password"
                                               th:name="password"
                                               minlength="5"
                                               placeholder="A-z min 5"
                                               pattern="[a-zA-Z]+" required="">
                                        <label class="form-label
                                        fw-semibold
                                        d-xxl-flex
                                        justify-content-xxl-center
                                        align-items-xxl-center"
                                               style="margin-top: 5px;">
                                            Role
                                        </label>
                                        <select class="form-select" multiple="multiple"
                                                required="required" th:field="*{roles}">
                                            <option th:each="role : ${roles}"
                                                    th:value="${role.id}"
                                                    th:text="${role.role}">
                                            </option>
                                        </select>
                                        <div class="row d-xxl-flex justify-content-xxl-center align-items-xxl-center">
                                            <div class="col d-xxl-flex justify-content-xxl-center align-items-xxl-center">
                                                <input class="btn btn-success d-xxl-flex justify-content-xxl-center align-items-xxl-center"
                                                       type="submit" value="Add new User"
                                                       style="margin-top: 5px;margin-bottom: 5px;" required="">
                                            </div>
                                        </div>
                                    </form>
                                </div>
                                <div class="col"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-auto"></div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
        integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js"
        integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V"
        crossorigin="anonymous"></script>
</body>
</html>